:_mod-docs-content-type: ASSEMBLY
[id=""]
= title
include::_attributes/common-attributes.adoc[]
:context: abc

toc::[]


This feature provides native BGP routing capabilities for the OVN-Kubernetes network plugin.

**Summary of Use Cases for BGP Integration with OVN-Kubernetes**

Integrating BGP into OVN-Kubernetes addresses several key requirements to enhance network functionality and performance within OpenShift clusters:

1. **Importing Routes from the Provider Network**: Currently, users must manually configure routes on each node using local gateway mode and tools like NM State, which is cumbersome and not dynamic. BGP integration allows OVN-Kubernetes to import routes directly from the provider network, eliminating manual configurations and enabling dynamic routing updates in response to network changes.

2. **Exporting Routes into the Provider Network**: While MetalLB advertises load balancer IPs via BGP, there's a need to advertise pod IPs directly to the provider network for better integration with third-party load balancers. BGP integration enables OVN-Kubernetes to export pod subnets or addresses, allowing external devices to reach pods directly without relying on custom operators to manage routing.

3. **Datapath Performance Enhancement**: By leveraging the underlay network through BGP, tunnel encapsulation can be bypassed, reducing packet overhead and increasing throughput. This direct use of the underlay network enhances performance for applications requiring high bandwidth.

4. **Multi-homing, Link Redundancy, and Fast Convergence**: BGP supports multi-homing with Equal-Cost Multi-Path (ECMP) routing, providing layer 3 failover capabilities. Coupled with Bidirectional Forwarding Detection (BFD), BGP can detect link failures within milliseconds, allowing rapid rerouting of traffic. This is crucial in topologies where nodes have multiple NICs connected to different BGP routers, ensuring high availability and network resilience.

== BGP routing custom resources

The following cluster scoped custom resources are used to configure BGP routing:

`RouteAdvertisements`::
This custom resource defines the advertisements for the BGP routing.

`FRRConfiguration`::
This custom resource defines the FRR configuration for the BGP routing.

=== RouteAdvertisements

.RouteAdvertisements spec object
[cols=".^2,.^2,.^6a",options="header"]
|====
|Field|Type|Description

|`advertisements`
|`object`
|Advertisements determines what is advertised.

|`advertisements.egressIP`
|`boolean`
|Determines if the network EgressIPs should be advertised.

|`advertisements.podNetwork`
|`boolean`
|Determines if the pod network routes should be advertised.

|`frrConfigurationSelector`
|`object`
|Determines which FRRConfigurations the OVN-Kubernetes driven FRRConfigurations will be based on. When omitted, all FRRConfigurations will be considered.

|`frrConfigurationSelector.matchExpressions`
|`array`
|List of label selector requirements (ANDed).

|`frrConfigurationSelector.matchExpressions.key`
|`string`
|The label key that the selector applies to.

|`frrConfigurationSelector.matchExpressions.operator`
|`string`
|The key's relationship to a set of values (e.g., In, NotIn).

|`frrConfigurationSelector.matchExpressions.values`
|`array`
|Array of string values for the operator.

|`frrConfigurationSelector.matchLabels`
|`object`
|Map of key-value pairs equivalent to label expressions. The requirements are ANDed.

|`networkSelector`
|`object`
|Determines which network routes should be advertised. When omitted, the default cluster network routes are advertised.

|`networkSelector.matchExpressions`
|`array`
|List of label selector requirements (ANDed).

|`networkSelector.matchExpressions.key`
|`string`
|The label key that the selector applies to.

|`networkSelector.matchExpressions.operator`
|`string`
|The key's relationship to a set of values (e.g., In, NotIn).

|`networkSelector.matchExpressions.values`
|`array`
|Array of string values for the operator.

|`networkSelector.matchLabels`
|`object`
|Map of key-value pairs equivalent to label expressions. The requirements are ANDed.

|`nodeSelector`
|`object`
|Limits the advertisements to selected nodes. When omitted, all nodes are selected.

|`nodeSelector.matchExpressions`
|`array`
|List of label selector requirements (ANDed).

|`nodeSelector.matchExpressions.key`
|`string`
|The label key that the selector applies to.

|`nodeSelector.matchExpressions.operator`
|`string`
|The key's relationship to a set of values (e.g., In, NotIn).

|`nodeSelector.matchExpressions.values`
|`array`
|Array of string values for the operator.

|`nodeSelector.matchLabels`
|`object`
|Map of key-value pairs equivalent to label expressions. The requirements are ANDed.

|`targetVRF`
|`string`
|Determines which VRF the routes should be advertised in.
|====
