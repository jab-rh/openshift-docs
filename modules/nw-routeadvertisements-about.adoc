// Module included in the following assemblies:
//
// * networking/route_advertisements/about-route-advertisements.adoc

:_mod-docs-content-type: CONCEPT
[id="nw-routeadvertisements-about_{context}"]
= Routing with BGP

With route advertisements over BGP enabled, the OVN-Kubernetes network plugin supports directly advertising routes within the cluster and to the provider network.

[id="supported-platforms_{context}"]
== Supported platforms

Advertising routes with BGP is supported on only bare-metal infrastructure.

[id="prerequisites_{context}"]
== Prerequisites

Use of route advertisements requires that you have properly configured BGP for your network provider. Outages or misconfigurations of your network provider might cause disruptions to your cluster network.

[id="cluster-network-operator_{context}"]
== Cluster Network Operator configuration

The Cluster Network Operator API exposes several fields to configure advanced routing:

- `spec.additionalRoutingCapabilities`: Enables deployment of the FRR-K8S daemon for the cluster, which can be used independently of route advertisements. When enabled, the FRR-K8S daemon is deployed on all nodes.
- `spec.defaultNetwork.ovnKubernetesConfig.routeAdvertisements`: Enables route advertisements for the default cluster network and user-defined networks. The `spec.additionalRoutingCapabilities` field must be set to `FRR` to enable this feature.

[id="compatibility-with-other-networking-features_{context}"]
== Compatibility with other networking features

Multiple external gateways::
--
When used with multiple external gateways (MEG) as implemented with the `AdminPolicyBasedExternalRoute` CR, there are several potential interactions:

- When BGP discovers routes to next hops, there can overlap with gateways configured with MEG or AdminPolicyBasedExternalRoute CRs. The behavior for this is undefined.
--

EgressIPs::
Supports the use of EgressIPs. The node where an egress IP address resides advertises the EgressIP. An egress IP address does not need to be on the same layer 2 network subnet as the egress node, because do not rely on gratuitous ARP (GARP).

Services::
Works in concert with the MetalLB Operator to advertise services to the provider network.

Egress service::
Full support.

Egress firewall::
Full support.

Egress QoS::
Full support.

Network policies::
Full support.

Direct pod ingress::
Full support for the default cluster network and user-defined networks.

[id="considerations-for-use-with-the-metallb-operator_{context}"]
== Considerations for use with the MetalLB Operator

The MetalLB Operator is installed as an add-on to the cluster. Deployment of the MetalLB Operator automatically enables FRR-K8s as an additional routing capability provider and uses the FRR-K8s daemon installed by this feature.

[id="bgp-routing-custom-resources_{context}"]
== BGP routing custom resources

The following custom resources are used to configure BGP routing:

`RouteAdvertisements`::
This custom resource defines the advertisements for the BGP routing. From this CR the OVN-Kubernetes controller generates a `FRRConfiguration` object that configures the FRR daemon to advertise the routes. This CR is cluster scoped.

`FRRConfiguration`::
This custom resource defines the FRR configuration for the BGP routing. This CR is namespaced.

== BGP implementation

TBD
